# !/usr/bin/env ruby

# gems
require 'open-uri'
require 'json'
require 'rubygems/package'
require 'zlib'

# Local Modules
require_relative 'modules/help'
require_relative 'modules/install'
require_relative 'modules/search'
require_relative 'modules/update'
require_relative 'modules/package_extractor'

# include function from modules
class Main
  include Help
  include Install
  include Search
  include Update

  def initialize
    raise 'Requires ruby >= 2.7.0' if RUBY_VERSION <= '2.7.0'

    argument = ARGV[0]

    update if ARGV.empty?
    search if argument[0].to_s != '-'

    case argument
    when '-S'
      install_pkg

    when '-U'
      update

    when '-h', '--help'
      help

    when '-v', '--version'
      puts 'yogurt aur helper version: 4.0'

    else
      puts "Invalid option #{argument}, try 'yogurt -h or --help' for more information"
      exit
    end
  end
end

Main.new
